<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Day 5 â€“ A DIY NAS to Host My RAG Server | Thomson MO5 Development: First Steps</title><meta name=keywords content="AI,nas,openmediavault,raspberry pi"><meta name=description content="Fifth day of vibe coding: how to locally host my MO5-dedicated RAG server."><meta name=author content><link rel=canonical href=https://thlg057.github.io/mo5-blog/en/days/day-5-nas-rag-server/><link crossorigin=anonymous href=https://thlg057.github.io/mo5-blog/assets/css/stylesheet.a090830a421002426baafbd314e38f149d77b4c48a12ee9312700d770b27fb26.css integrity="sha256-oJCDCkIQAkJrqvvTFOOPFJ13tMSKEu6TEnANdwsn+yY=" rel="preload stylesheet" as=style><link rel=icon href=https://thlg057.github.io/mo5-blog/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://thlg057.github.io/mo5-blog/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://thlg057.github.io/mo5-blog/favicon-32x32.png><link rel=apple-touch-icon href=https://thlg057.github.io/mo5-blog/apple-touch-icon.png><link rel=mask-icon href=https://thlg057.github.io/mo5-blog/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=fr href=https://thlg057.github.io/mo5-blog/days/day-5-nas-rag-server/><link rel=alternate hreflang=en href=https://thlg057.github.io/mo5-blog/en/days/day-5-nas-rag-server/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-WRQSQ5Y81F"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-WRQSQ5Y81F")}</script><meta property="og:url" content="https://thlg057.github.io/mo5-blog/en/days/day-5-nas-rag-server/"><meta property="og:site_name" content="Thomson MO5 Development: First Steps"><meta property="og:title" content="Day 5 â€“ A DIY NAS to Host My RAG Server"><meta property="og:description" content="Fifth day of vibe coding: how to locally host my MO5-dedicated RAG server."><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="days"><meta property="article:published_time" content="2025-12-11T00:00:00+00:00"><meta property="article:modified_time" content="2025-12-11T00:00:00+00:00"><meta property="article:tag" content="AI"><meta property="article:tag" content="Nas"><meta property="article:tag" content="Openmediavault"><meta property="article:tag" content="Raspberry Pi"><meta name=twitter:card content="summary"><meta name=twitter:title content="Day 5 â€“ A DIY NAS to Host My RAG Server"><meta name=twitter:description content="Fifth day of vibe coding: how to locally host my MO5-dedicated RAG server."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Days","item":"https://thlg057.github.io/mo5-blog/en/days/"},{"@type":"ListItem","position":2,"name":"Day 5 â€“ A DIY NAS to Host My RAG Server","item":"https://thlg057.github.io/mo5-blog/en/days/day-5-nas-rag-server/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Day 5 â€“ A DIY NAS to Host My RAG Server","name":"Day 5 â€“ A DIY NAS to Host My RAG Server","description":"Fifth day of vibe coding: how to locally host my MO5-dedicated RAG server.","keywords":["AI","nas","openmediavault","raspberry pi"],"articleBody":"The goal of this day 5 was to solve a problem that was fairly simple on paper, but blocking in practice: where to locally host my MO5-dedicated RAG server.\nQuick reminder: what is a RAG server? A RAG (Retrieval-Augmented Generation) server is a backend that combines:\na search engine (often based on embeddings / vectors) a knowledge base (documents, sources, archivesâ€¦) an LLM (local or remote) The idea is simple:\nğŸ‘‰ instead of asking a question â€œinto the voidâ€ to a model, we retrieve relevant information from a database, then inject it into the prompt.\nIn my case, this RAG server is dedicated to the MO5: it is used to query documentation, sources, technical notes, etc., in a contextual way.\nThe problem: my dev environment My main dev environment runs on a Raspberry Pi.\nIf I run the RAG server on my laptop, it is simply not accessible from that environment.\nI do have a Synology NAS at homeâ€¦ but:\nitâ€™s a DS110J itâ€™s old very poorly customizable cannot host Docker services So I figured it might be time to turn the page on the Synology NAS and replace it with something moreâ€¦ flexible.\nA Raspberry Pi 4â€“based NAS The idea:\nğŸ‘‰ build a DIY NAS, based on a Raspberry Pi 4 (which I already have), that can both:\nact as storage host services / Docker images My (very reasonable) needs Nothing exotic:\nğŸ“ A file server to share documents and sources ğŸ‘¥ User and permissions management ğŸ¬ A video streaming service (yes, UPnP is outdated, I knowâ€¦ but I still find it convenient) ğŸ³ The ability to host Docker images (my RAG server will be deployed that way) And above all:\nsomething easy to configure with a graphical interface (must be my Windows background ğŸ˜„) not too much of a headache OpenMediaVault After some research, OpenMediaVault checked quite a few boxes.\nThe installation is fairly straightforward:\nstart from a Raspberry Pi OS Lite image (no GUI needed, it will be used as a server) install OpenMediaVault via the official script wget -O - https://github.com/OpenMediaVault-Plugin-Developers/installScript/raw/master/install | sudo bash The hard drive: an important detail I already had an external 1 TB hard drive, but powered only via USB.\nFor NAS usage, thatâ€™s not a great idea.\nğŸ‘‰ The Raspberry Pi does not always provide enough power over USB\nğŸ‘‰ Risk of disconnections and data corruption\nA self-powered hard drive is much more suitable:\ndedicated power supply stability reliability for a 24/7 service Hardware upgrade Off to Leboncoin.\nResult:\nğŸ’¾ Western Digital hard drive ğŸ“¦ 2 TB ğŸ”Œ Self-powered ğŸ’° â‚¬35.49 shipping included Perfect.\nNAS configuration Overall, configuring OpenMediaVault went fairly smoothly.\nWhere I struggled a bit was when I wanted to compile remotely from Visual Studio Code on my laptop.\nSSH issue with OpenMediaVault On the NAS, I created the same user as on my laptop to simplify access.\nBut users created via OpenMediaVault are not part of the group allowed to connect via SSH.\nSo you need to add the user to the correct group:\nsudo usermod -aG _ssh myuser âš ï¸ Very important:\ndo not forget the _ before ssh\nThen apply the change:\nsudo systemctl restart ssh VS Code still refuses to connect SSH connection works fine via Putty, but VS Code Remote-SSH refused to work.\nIn the logs:\nchannel 3: open failed: administratively prohibited ERROR: TCP port forwarding appears to be disabled on the remote host. Ensure that the sshd_config has `AllowTcpForwarding yes`. And thatâ€™s when it clicked.\nğŸ‘‰ This is not a VS Code bug\nğŸ‘‰ Itâ€™s an SSH restriction on the OpenMediaVault side\nWhy does VS Code need this? VS Code Remote-SSH uses:\nport forwarding TCP tunnels notably -D (dynamic port forwarding / SOCKS) OpenMediaVault disables this by default.\nâš ï¸ Important: do not manually edit sshd_config as OMV may overwrite changes. You must go through the OMV interface.\nThe (clean) solution In the OpenMediaVault web interface:\nServices â†’ SSH Settings tab Enable / verify:\nâœ… Allow TCP forwarding âœ… Allow tunneling âœ… Allow password authentication (if used) Apply.\nğŸ‰ Perfect.\nVS Code can now connect remotely to the Raspberry Pi without any issues. Whatâ€™s next? All that remains is to:\nenable Docker in OpenMediaVault deploy my MO5-dedicated RAG server image Day 5 bisâ€¦ Once the image is built and running, my API is accessible via port 8080.\nIn short:\nhttp://nas â†’ NAS interface (yes, no certificate yet ğŸ˜…) http://nas:8080 â†’ RAG server API Itâ€™s not very convenient to have to remember port numbers, especially if I want to host other services later.\nğŸ‘‰ https://nas/mo5-knowledges-api would be the ideal address for my server!\nSo I set my sights on installing a reverse proxyâ€¦\nBut thatâ€¦ will be for another day ğŸ˜‰\n","wordCount":"785","inLanguage":"en","datePublished":"2025-12-11T00:00:00Z","dateModified":"2025-12-11T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://thlg057.github.io/mo5-blog/en/days/day-5-nas-rag-server/"},"publisher":{"@type":"Organization","name":"Thomson MO5 Development: First Steps","logo":{"@type":"ImageObject","url":"https://thlg057.github.io/mo5-blog/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://thlg057.github.io/mo5-blog/en/ accesskey=h title="Thomson MO5 Development: First Steps (Alt + H)">Thomson MO5 Development: First Steps</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li><li><a href=https://thlg057.github.io/mo5-blog/ title=FranÃ§ais aria-label=FranÃ§ais>Fr</a></li></ul></div></div><ul id=menu></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">Day 5 â€“ A DIY NAS to Host My RAG Server</h1><div class=post-description>Fifth day of vibe coding: how to locally host my MO5-dedicated RAG server.</div><div class=post-meta><span title='2025-12-11 00:00:00 +0000 UTC'>December 11, 2025</span>&nbsp;|&nbsp;<span>Translations:</span><ul class=i18n_list><li><a href=https://thlg057.github.io/mo5-blog/days/day-5-nas-rag-server/>Fr</a></li></ul></div></header><div class=post-content><p>The goal of this <strong>day 5</strong> was to solve a problem that was fairly simple on paper, but blocking in practice: <strong>where to locally host my MO5-dedicated RAG server</strong>.</p><h3 id=quick-reminder-what-is-a-rag-server>Quick reminder: what is a RAG server?<a hidden class=anchor aria-hidden=true href=#quick-reminder-what-is-a-rag-server>#</a></h3><p>A <strong>RAG (Retrieval-Augmented Generation)</strong> server is a backend that combines:</p><ul><li>a search engine (often based on embeddings / vectors)</li><li>a knowledge base (documents, sources, archivesâ€¦)</li><li>an LLM (local or remote)</li></ul><p>The idea is simple:<br>ğŸ‘‰ instead of asking a question â€œinto the voidâ€ to a model, we <strong>retrieve relevant information from a database</strong>, then <strong>inject it into the prompt</strong>.</p><p>In my case, this RAG server is dedicated to the <strong>MO5</strong>: it is used to query documentation, sources, technical notes, etc., in a contextual way.</p><h3 id=the-problem-my-dev-environment>The problem: my dev environment<a hidden class=anchor aria-hidden=true href=#the-problem-my-dev-environment>#</a></h3><p>My main dev environment runs on a <strong>Raspberry Pi</strong>.<br>If I run the RAG server on my laptop, it is simply <strong>not accessible</strong> from that environment.</p><p>I do have a <strong>Synology NAS</strong> at homeâ€¦ but:</p><ul><li>itâ€™s a <strong>DS110J</strong></li><li>itâ€™s old</li><li>very poorly customizable</li><li>cannot host Docker services</li></ul><p>So I figured it might be time to <strong>turn the page on the Synology NAS</strong> and replace it with something moreâ€¦ flexible.</p><h2 id=a-raspberry-pi-4based-nas>A Raspberry Pi 4â€“based NAS<a hidden class=anchor aria-hidden=true href=#a-raspberry-pi-4based-nas>#</a></h2><p>The idea:<br>ğŸ‘‰ build a <strong>DIY NAS</strong>, based on a <strong>Raspberry Pi 4</strong> (which I already have), that can both:</p><ul><li>act as storage</li><li>host services / Docker images</li></ul><h3 id=my-very-reasonable-needs>My (very reasonable) needs<a hidden class=anchor aria-hidden=true href=#my-very-reasonable-needs>#</a></h3><p>Nothing exotic:</p><ul><li>ğŸ“ A file server to share documents and sources</li><li>ğŸ‘¥ User and permissions management</li><li>ğŸ¬ A video streaming service (yes, UPnP is outdated, I knowâ€¦ but I still find it convenient)</li><li>ğŸ³ The ability to host Docker images (my RAG server will be deployed that way)</li></ul><p>And above all:</p><ul><li>something <strong>easy to configure</strong></li><li>with a <strong>graphical interface</strong> (must be my Windows background ğŸ˜„)</li><li>not too much of a headache</li></ul><h3 id=openmediavault>OpenMediaVault<a hidden class=anchor aria-hidden=true href=#openmediavault>#</a></h3><p>After some research, <strong>OpenMediaVault</strong> checked quite a few boxes.</p><p>The installation is fairly straightforward:</p><ul><li>start from a <strong>Raspberry Pi OS Lite</strong> image (no GUI needed, it will be used as a server)</li><li>install OpenMediaVault via the official script</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>wget -O - https://github.com/OpenMediaVault-Plugin-Developers/installScript/raw/master/install <span class=p>|</span> sudo bash
</span></span></code></pre></div><h2 id=the-hard-drive-an-important-detail>The hard drive: an important detail<a hidden class=anchor aria-hidden=true href=#the-hard-drive-an-important-detail>#</a></h2><p>I already had an external <strong>1 TB</strong> hard drive, but powered only via USB.</p><p>For NAS usage, thatâ€™s <strong>not a great idea</strong>.</p><p>ğŸ‘‰ The Raspberry Pi does not always provide enough power over USB<br>ğŸ‘‰ Risk of disconnections and data corruption</p><p>A <strong>self-powered</strong> hard drive is much more suitable:</p><ul><li>dedicated power supply</li><li>stability</li><li>reliability for a 24/7 service</li></ul><h3 id=hardware-upgrade>Hardware upgrade<a hidden class=anchor aria-hidden=true href=#hardware-upgrade>#</a></h3><p>Off to <strong>Leboncoin</strong>.<br>Result:</p><ul><li>ğŸ’¾ Western Digital hard drive</li><li>ğŸ“¦ 2 TB</li><li>ğŸ”Œ Self-powered</li><li>ğŸ’° â‚¬35.49 shipping included</li></ul><p>Perfect.</p><h2 id=nas-configuration>NAS configuration<a hidden class=anchor aria-hidden=true href=#nas-configuration>#</a></h2><p>Overall, configuring OpenMediaVault went fairly smoothly.</p><p>Where I struggled a bit was when I wanted to compile remotely from <strong>Visual Studio Code</strong> on my laptop.</p><h3 id=ssh-issue-with-openmediavault>SSH issue with OpenMediaVault<a hidden class=anchor aria-hidden=true href=#ssh-issue-with-openmediavault>#</a></h3><p>On the NAS, I created <strong>the same user as on my laptop</strong> to simplify access.</p><p>But users created via OpenMediaVault <strong>are not part of the group allowed to connect via SSH</strong>.</p><p>So you need to add the user to the correct group:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo usermod -aG _ssh myuser
</span></span></code></pre></div><p>âš ï¸ <strong>Very important</strong>:<br>do not forget the <code>_</code> before <code>ssh</code></p><p>Then apply the change:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo systemctl restart ssh
</span></span></code></pre></div><h3 id=vs-code-still-refuses-to-connect>VS Code still refuses to connect<a hidden class=anchor aria-hidden=true href=#vs-code-still-refuses-to-connect>#</a></h3><p>SSH connection works fine via <strong>Putty</strong>, but <strong>VS Code Remote-SSH</strong> refused to work.</p><p>In the logs:</p><pre tabindex=0><code>channel 3: open failed: administratively prohibited
ERROR: TCP port forwarding appears to be disabled on the remote host.
Ensure that the sshd_config has `AllowTcpForwarding yes`.
</code></pre><p>And thatâ€™s when it clicked.</p><p>ğŸ‘‰ This is not a VS Code bug<br>ğŸ‘‰ Itâ€™s an <strong>SSH restriction on the OpenMediaVault side</strong></p><h3 id=why-does-vs-code-need-this>Why does VS Code need this?<a hidden class=anchor aria-hidden=true href=#why-does-vs-code-need-this>#</a></h3><p>VS Code Remote-SSH uses:</p><ul><li><strong>port forwarding</strong></li><li>TCP tunnels</li><li>notably <code>-D</code> (dynamic port forwarding / SOCKS)</li></ul><p>OpenMediaVault disables this by default.</p><p>âš ï¸ Important: do not manually edit <code>sshd_config</code> as OMV may overwrite changes. You must go through the OMV interface.</p><h3 id=the-clean-solution>The (clean) solution<a hidden class=anchor aria-hidden=true href=#the-clean-solution>#</a></h3><p>In the OpenMediaVault web interface:</p><ul><li><strong>Services â†’ SSH</strong></li><li><strong>Settings</strong> tab</li></ul><p>Enable / verify:</p><ul><li>âœ… Allow TCP forwarding</li><li>âœ… Allow tunneling</li><li>âœ… Allow password authentication (if used)</li></ul><p>Apply.</p><p>ğŸ‰ Perfect.<br>VS Code can now connect remotely to the Raspberry Pi without any issues.
<img alt="OpenMediaVault SSH configuration" loading=lazy src=https://thlg057.github.io/mo5-blog/assets/openmediavault-ssh.jpg title="OpenMediaVault SSH configuration"></p><h2 id=whats-next>Whatâ€™s next?<a hidden class=anchor aria-hidden=true href=#whats-next>#</a></h2><p>All that remains is to:</p><ul><li>enable <strong>Docker</strong> in OpenMediaVault</li><li>deploy my <strong>MO5-dedicated RAG server</strong> image</li></ul><h3 id=day-5-bis>Day 5 bisâ€¦<a hidden class=anchor aria-hidden=true href=#day-5-bis>#</a></h3><p>Once the image is built and running, my API is accessible via <strong>port 8080</strong>.</p><p>In short:</p><ul><li><code>http://nas</code> â†’ NAS interface (yes, no certificate yet ğŸ˜…)</li><li><code>http://nas:8080</code> â†’ RAG server API</li></ul><p>Itâ€™s not very convenient to have to remember port numbers, especially if I want to host other services later.</p><p>ğŸ‘‰ <code>https://nas/mo5-knowledges-api</code> would be the ideal address for my server!</p><p>So I set my sights on installing a <strong>reverse proxy</strong>â€¦<br>But thatâ€¦ will be for another day ğŸ˜‰</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://thlg057.github.io/mo5-blog/en/tags/ai/>AI</a></li><li><a href=https://thlg057.github.io/mo5-blog/en/tags/nas/>Nas</a></li><li><a href=https://thlg057.github.io/mo5-blog/en/tags/openmediavault/>Openmediavault</a></li><li><a href=https://thlg057.github.io/mo5-blog/en/tags/raspberry-pi/>Raspberry Pi</a></li></ul></footer></article></main><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>